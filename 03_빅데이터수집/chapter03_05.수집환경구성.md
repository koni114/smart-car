## chpater03-05 수집환경구성
- 현재 전체 아키텍처에서 플럼과 카프카의 수집 단계에 와있고, 이번 시간에는 플럼과 카프카를 설치를 해볼 것임

### 플럼 설치
- CM의 홈에서 [서비스 추가] 화면으로 이동. 추가할 서비스 유형 중 [Flume]을 선택하고 우측 하단의 [계속] 버튼을 클릭
- 플럼을 설치할 서버 호스트를 server02.hadoop.com 으로 선택하고 [확인] -> [계속] 버튼을 클릭
- 설치 완료 메세지가 보이면, 플럼을 Server02에 성공적으로 설치한 것임. [완료] 버튼을 클릭해 플럼 설치를 종료
- CM의 홈 화면에 플럼 메뉴가 추가된 것을 확인 가능. 플럼의 Default 그룹의 Heap Memory가 너무 작게 설정돼 있음   
  파일럿 프로젝트용으로 좀 더 크게 설정
- CM 홈 -> [Flume] -> [구성]에서 검색란에 "Java Heap"이라고 입력하면 힙 메모리 설정창이 나타남. 여기서 힙 크기를 100MiB 정도로만 늘려줌
  - 변경 전: 50
  - 변경 후: 100
- CM 홈 -> [Flume] 우측의 콤보박스를 선택하고 [시작] 메뉴를 선택해 플럼 에이전트를 구동  

### 카프카 설치
- CM의 홈에서 [서비스 추가] 화면으로 이동. 추가할 서비스 유형 중 [Kafka]을 선택하고 우측 하단의 [계속] 버튼을 클릭
- 카프카를 설치할 서버 호스트를 server02.hadoop.com 으로 선택하고 [확인] -> [계속] 버튼 클릭. 참고로 카프카 MirrorMaker, Gateway는 선택하지 않음
- 카프카 변경 내용 검토가 나타나면 기본값을 유지하고 [계속] 버튼을 클릭. 카프카 구성요소들이 Server02에 설치되고 카프카 서버가 시작
- 설치 완료 메세지가 보이면, 카프카가 Server02에 정상적으로 설치된 것임
- 파일럿 환경을 고려해 카프카에 저장될 메세지의 보관 기간을 짧게 조정. CM 홈에서 [Kafka] -> [구성]을 선택하고, 검색어로 "Data Retention Time"을 입력한 후 7일에서 15분으로 수정